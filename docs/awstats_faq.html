<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta name="description" content="AWStats Documentation - FAQ page">
<meta name="keywords" content="awstats, awstat, faq, error, errors, frequently, asked, questions, support, help, problem, solution, troubleshooting, rotate log">
<meta name="robots" content="index,follow">
<meta name="title" content="AWStats Documentation - FAQs">
<title>AWStats Documentation - FAQs</title>
<link rel="stylesheet" href="styles.css" type="text/css">
<!-- $Revision$ - $Author$ - $Date$ -->
</head>

<body topmargin=10 leftmargin=5>


<table style="font: 10pt arial,helvetica,verdana" cellpadding=0 cellspacing=0 border=0 bgcolor=#FFFFFF width=100%>

<!-- Large -->
<tr style="font: 10pt arial,helvetica,verdana">
<td bgcolor=#9999cc align=center><a href="/"><img src="images/awstats_logo4.png" border=0></a></td>
<td bgcolor=#9999cc align=center>
<br>
<font style="font: 16pt arial,helvetica,sanserif" color=#EEEEFF><b>AWStats logfile analyzer 5.3 Documentation</b></font><br>
<br>
</td>
<td bgcolor=#9999cc align=center>
&nbsp;
</td>
</tr>

</table>


<br><br><H1 style="font: 26px arial,helvetica,sanserif">Frequently Asked Questions + Troubleshooting</H1>


<br>
<u>ABOUT QUESTIONS:</u><br>
<ul>
FAQ-ABO100 <a href="#SERVERSOS">Which server log files or operating systems are supported ?</a><br>
FAQ-ABO150 <a href="#LOGFORMAT">Which log format can AWStats analyze ?</a><br>
FAQ-ABO200 <a href="#LANG">Which languages are available ?</a><br>
FAQ-ABO250 <a href="#PHPNUKE">Can AWStats be integrated with PHP Nuke ?</a><br>
</ul>
<br>

<u>SETUP or ERROR QUESTIONS:</u><br>
Here, you can find the most common questions and answers users have to install/setup AWStats.<br>
<ul>
FAQ-SET025 <a href="#NOLOG">How to use AWStats with no server log</a><br>
FAQ-SET050 <a href="#MISSINGDOLLAR">Error "Missing $ on loop variable ..."</a><br>
FAQ-SET100 <a href="#CGISOURCE">I see Perl script's source instead of its execution in my browser.</a><br>
FAQ-SET150 <a href="#SPAWNERROR">Error "...couldn't create/spawn child process..." with Apache for windows.</a><br>
FAQ-SET200 <a href="#INTERNAL">"Internal Error" or "Error 500" in a browser connecting to Apache.</a><br>
FAQ-SET210 <a href="#SPEED">"Internal Error" after a long time in my browser (See FAQ-COM100 "AWStats speed/timeout problems").</a><br>
FAQ-SET220 <a href="#CRASH">Crash while running awstats.pl or page content only partialy loaded</a><br>
FAQ-SET250 <a href="#PERSONALIZEDLOG">Log format setup or errors.</a><br>
FAQ-SET260 <a href="#FTP">Setup for FTP server log files.</a><br>
FAQ-SET270 <a href="#MAIL">Setup for MAIL log files (Sendmail, Postfix, Exchange).</a><br>
FAQ-SET272 <a href="#MEDIASERVER">Setup for WINDOWS MEDIA SERVER log files.</a><br>
FAQ-SET280 <a href="#NOTSAMENUMBER">Error "Not same number of records of...".</a><br>
FAQ-SET300 <a href="#COULDNOTOPEN">Error "Couldn't open file ..."</a><br>
FAQ-SET350 <a href="#EMPTY_STATS">Empty or null statistics reported.</a><br>
FAQ-SET400 <a href="#REDIRECT">Pipe redirection to a file give me an empty file.</a><br>
FAQ-SET450 <a href="#NO_ICON">No pictures/graphics shown.</a><br>
FAQ-SET500 <a href="#ROTATE">How to rotate my logs without loosing data.</a><br>
FAQ-SET550 <a href="#CRONTAB">How to run AWStats frequently ?</a><br>
FAQ-SET600 <a href="#EXCLUDEHOSTS">How to exclude my IP address (or whole subnet mask) from stats ?</a><br>
FAQ-SET700 <a href="#MIGRATEDOUBLED">My visits are doubled for old month I migrated from 3.2 to 5.x</a><br>

</ul>
<br>

<u>COMMON SUPPORT QUESTIONS:</u><br>
Here, you can find the most common questions and answers users have when using AWStats.<br>
<ul>
FAQ-COM100 <a href="#SPEED">AWStats speed/timeout problems.</a><br>
FAQ-COM150 <a href="#BENCHMARK">Benchmark question.</a><br>
FAQ-COM200 <a href="#DNS">How reverse DNS Lookup works, unresolved IP Addresses ?</a><br>
FAQ-COM250 <a href="#DIFFERENT_RESULTS">Different results than other log analyzers (Analog, Webalizer, WUsage, wwwStats...).</a><br>
FAQ-COM300 <a href="#DIFFERENCE_HOURS">Difference between local hour and AWStats reported hour.</a><br>
FAQ-COM350 <a href="#OLDLOG">How can I process old log file ?</a><br>
FAQ-COM400 <a href="#MULTILOG">How can I update my statistics when I use a load balancing system that splits my logs ?</a><br>
FAQ-COM500 <a href="#RESET">How can I reset all my statistics ?</a><br>
FAQ-COM550 <a href="#EDITHISTORY">Can I safely remove a line in AWStats history files (awstatsMMYYYY*.txt) ?</a><br>
</ul>
<br>

<u>SECURITY QUESTIONS:</u><br>
Here, you can find the common questions about security problems when setting or using AWStats.<br>
<ul>
FAQ-SEC100 <a href="#CSSATTACK">Can AWStats be used to make Cross Site Scripting Attacks ?</a><br>
FAQ-SEC150 <a href="#SECUSER">How can I prevent some users to see statistics of other users ?</a><br>
FAQ-SEC200 <a href="#WORMS">How to manage log files (and statistics) corrupted by worms attacks like 'Code Red Virus like'.</a><br>
</ul>
<br>

<hr>
<br><br>
<a name="SERVERSOS"></a><br>
<b><u>FAQ-ABO100 : WHICH SERVER LOG FILES OR OS ARE SUPPORTED ?</u></b><br>
AWStats can works with :<br>
- All web server able to write log file with a <u>combined log format (XLF/ELF)</u> like Apache,
a <u>common log format (CLF)</u> like Apache or Squid, a <u>W3C log format</u> like IIS 5.0 or higher,
or any other log format that contains all information AWStats expect to find.<br>
- Most of all others Web/Wap/Proxy/Streaming servers.<br>
- Some FTP, Syslog or Mail log files.<br>
Because AWStats is in Perl, it can works on all Operating Systems.<br>
Examples of used platforms (bold means 'tested by author', others were reported by AWStats users to work correctly) :<br>
<table bgcolor=#F0F0F0 width="100%" class=CFAQ><tr class=CFAQ><td class=CFAQ>
<u>OS:</u><br>
<b>Windows 2000</b>, <b>Windows NT 4.0</b>, Windows Me, <b>Linux</b>, Macintosh, <b>Solaris</b>, <b>Aix</b>, BeOS, ...<br>
<u>Web/Wap/Proxy/FTP/Mails/Streaming servers</u><br>
<b>Apache 1.3.x and 2</b>, <b>IIS 5.0</b>, WebStar, WebLogic, WebSite, <b>Windows Media Server</b>, Tomcat, <b>Squid</b>, <b>Sendmail</b>, <b>Postfix</b>,
Roxen, Resin, <b>ProFTP</b>, Lotus Notes/Domino, IPlanet, IceCast, Zope, ZeroBrand, www4mail, ...<br>
<u>Perl interpreters:</u><br>
<b>ActivePerl 5.6</b>, <b>Perl 5.8</b>, <b>Perl 5.6</b>, <b>Perl 5.0</b>, <b>mod_perl for Apache</b>, ...<br>
</td></tr></table>
<br>

<a name="LOGFORMAT"></a><br>
<b><u>FAQ-ABO150 : WHICH LOG FORMAT CAN AWSTATS ANALYZE ?</u></b><br>
AWStats setup knows predefined log format you can use to make AWStats config easier. However,
you can define your own log format, that's the reason why AWStats can analyze nearly all web, wap
and proxy server log files. Some FTP servers log files, Syslog or mail logs can also be analyzed.<br>
The only requirement is "Your log file must contain required information".<br>
This is example of possible log format:<br>
<i>
Apache combined log format (known as NCSA combined log format or XLF or ELF format)<br>
IIS 5.0+ log format (known as W3C format)<br>
Webstar native log format<br>
Windows Media Server<br>
ProFTP server<br>
A lot of web/wap/proxy/streaming servers log format<br>
Apache common log format (AWStats can now analyze such log files but such log files does not
contain all information AWStats is looking for. The problem is in the content, not in the
format). I think analyzing common log files is not interesting because there is a lot of
missing information: no way to filter robots, find search engines, keywords, os, browser.
But a lot of users asked me for it, so AWStats support it.
However, a lot of interesting advanced features can't work: browsers, os's, keywords, robot detection...).
</i><br>
See also <a href="#PERSONALIZEDLOG">F.A.Q.: LOG FORMAT SETUP OR ERRORS </a>.<br>
<br>


<a name="LANG"></a><br>
<b><u>FAQ-ABO200 : WHICH LANGUAGES ARE AVAILABLE ?</u></b><br>
AWStats can make reports in 33 languages. This is a list of all of them, for last version, in
alphabetical order (with the code you can use for <a href="awstats_config.html#Lang">Lang</a>
and <a href="awstats_config.html#ShowFlagLinks">ShowFlagLinks</a> parameter) :<br>
<i>
<table bgcolor=#F0F0F0 width="100%" class=CFAQ><tr class=CFAQ><td class=CFAQ>
Albanian=al, Bosnian=ba, Bulgarian=bg,
Chinese (Taiwan)=tw, Chinese (Traditional)=cn, Czech=cz,
Danish=dk, Dutch=nl, English=en, Finnish=fi, French=fr, German=de,
Greek=gr, Hungarian=hu, Indonesian=id, Italian=it, Japanese=jp, Korean=kr,
Latvian=lv, Norwegian (Nynorsk)=nn, Norwegian (Bokmal)=nb, Polish=pl,
Portuguese=pt, Portuguese (Brazilian)=br, Romanian=ro, Russian=ru,
Slovak=sk, Spanish=es, Spanish (Catalan)=es_cat, Swedish=se, Turkish=tr,
Ukrainian=ua, Welsh=wlk
</td></tr></table>
</i>
However, AWStats documentation is only provided in English.<br>
But, you can find some documentation made by contributors:<br>
In French: <a href="http://www.funix.org/fr/linux/main-linux.php3?ref=logapache&page=menu" target_doc>How to install AWStats and Webalizer</a><br>
<br>

<a name="PHPNUKE"></a><br>
<b><u>FAQ-ABO250 : CAN AWSTATS BE INTEGRATED WITH PHP NUKE ?</u></b><br>
I don't know any plan to make an Add-On for PHPNuke to include AWStats, for the moment.
But this can change. You should ask to have a such Add-On to PHPNuke authors, and on PHPNuke forums.<br>
<br>


<hr><br>


<a name="NOLOG"></a><br>
<b><u>FAQ-SET025 : HOW TO USE AWSTATS WITH NO SERVER LOG FILE</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
I want to have AWStats statistics but i have no access to my server log file.<br>
<font class=CSolution>SOLUTION:</font><br>
Because AWStats is a log analyzer, if you don't have any way to read your server log file,
you have nothing to analyze and you can't use AWStats.<br>
<br>

<a name="MISSINGDOLLAR"></a><br>
<b><u>FAQ-SET050 : ERROR "MISSING $ ON LOOP VARIABLE ..."</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
When I run awstats.pl from command line, I get:<br>
<i>"Missing $ on loop variable at awstats.pl line xxx"</i><br>
<font class=CSolution>SOLUTION:</font><br>
Problem is in your Perl interpreter. Try to install or reinstall a more recent/stable Perl interpreter.<br>
You can get new Perl version at <a href="http://www.activestate.com/ActivePerl/">ActivePerl</a> (<font color=#221188>Win32</font>)
or <a href="http://www.perl.com/pub/language/info/software.html">Perl.com</a> (<font color=#221188>Unix/Linux/Other</font>).<br>
<br>

<a name="CGISOURCE"></a><br>
<b><u>FAQ-SET100 : I SEE PERL SCRIPT'S SOURCE INSTEAD OF ITS EXECUTION</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
When I try to execute the Perl script through the web server,
I see the Perl script's source instead of the HTML result page of its execution !<br>
<font class=CSolution>SOLUTION:</font><br>
This is not a problem of AWStats but a problem in your web server setup.
awstats.pl file must be in a directory defined in your web server to be a "cgi" directory,
this means, a directory configured in your web server to contain "executable" files and
not to documents files.
You have to read your web server manual to know how to setup a directory to be an
"executable cgi" directory (With IIS, you have some checkbox to check in directory
properties, with Apache you have to use the "ExecCGI" option in the directory "Directive").<br>
<br>

<a name="SPAWNERROR"></a><a name="INTERNAL"></a><br>
<b><u>FAQ-SET150 : INTERNAL ERROR 500 IN MY BROWSER</u></b><br>
<b><u>FAQ-SET200 : ERROR "... COULDN'T CREATE/SPAWN CHILD PROCESS..."</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
AWStats seems to run fine at the command prompt but when ran as a CGI from a browser, I get an <i>"Internal Error 500"</i>.<br>
I also also might have the following message in my Apache error log file (or in browser with Apache 2.0+):<br>
<i>...couldn't create/spawn child process: c:/mywebroot/cgi-bin/awstats.pl</i><br>
<font class=CSolution>SOLUTION:</font><br>
First, try to run awstats.pl from command line to see if file is correct. If you get some
syntax errors and use a Unix like OS, check if your file is a Unix like text file (This
means each line end with a LF char and not a CR+LF char).<br>
If awstats.pl file runs correctly from command line, this is probably because your
web server is not able to known how to run perl scripts. This problem can occur with Apache web
servers with no internal Perl interpreter (mod_perl not active). To solve this, you must
tell Apache where is your external Perl interpreter.<br>
<u>For this, you have 2 solutions:</u><br>
1) Add the following directive in your Apache <b>httpd.conf</b> config (or remove the # to uncomment it if line is already available)<br>
<b><i>ScriptInterpreterSource registry</i></b><br>
Then restart Apache. This will tell Apache to look into the registry to find the program associated to .pl extension.<br>
2) Other solution (not necessary if first solution works): Change the first line of awstats.pl file with the full path of your Perl interpreter.<br>
Example with Windows OS and ActivePerl Perl interpreter (installed in C:\Program Files\ActiveState\ActivePerl),
you must change the first line of awstats.pl file with:<br>
<i>#!c:/program files/activestate/activeperl/bin/perl</i><br>
<br>

<a name="CRASH"></a><a name="CRASH"></a><br>
<b><u>FAQ-SET220 : CRASH WHILE RUNNING AWSTATS.PL OR PAGE CONTENT ONLY PARTIALY LOADED ON WINDOWS XP</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
Sometimes my browser (Most often IE6) crash while running awstats.pl with some AWStats configuration.
With some other versions or browsers, page content is partialy loaded.<br>
<font class=CSolution>SOLUTION:</font><br>
Problem was with WinXP and WinXPpro as documented at MS site Q317949;<br>
"Socket Sharing Creates Data Loss When Listen and Accept Occur on Different Processes"<br>
Result was that MSIE would crash or display nothing. Netscaep and Opera handled the socket better but displayed the pages partially.<br>
The efffect of the bug was more prononced as the page contents increased(above 30k).<br>
http://support.microsoft.com/default.aspx?scid=kb;EN-US;q317949<br>
And also at Apache.org<br>
http://www.apache.org/dist/httpd/binaries/win32/<br>
MS produced a Hotfix which is now included in SP1.<br>
<br>

<a name="PERSONALIZEDLOG"></a><br>
<b><u>FAQ-SET250 : LOG FORMAT SETUP OR ERRORS</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
Which value do I have to put in the LogFormat parameter to make AWStats working with my log file format ?<br>
<font class=CSolution>SOLUTION:</font><br>
The AWStats config file give you all possible values for LogFormat parameter.
To help you, this is some common cases of log file format, and
the corresponding value for LogFormat you must use in your AWStats config file:<br>

<table bgcolor=#F0F0F0 width="100%" class=CFAQ><tr class=CFAQ><td class=CFAQ>
<u>If your log records are EXACTLY like this (<b>NCSA combined/XLF/ELF</b> log format):</u><br>
<i>62.161.78.73 - - [dd/mmm/yyyy:hh:mm:ss +0x00] "GET /page.html HTTP/1.1" 200 1234 "http://www.from.com/from.htm" "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)"</i><br>
You must use : <i>LogFormat=1</i><br>
This is same than: <i>LogFormat="%host %other %logname %time1 %methodurl %code %bytesd %refererquot %uaquot"</i><br>
</td></tr></table>

<u>If your log records are EXACTLY like this (<b>NCSA combined with several virtualhostname</b> sharing same log file).</u><br>
<i>virtualserver1 62.161.78.73 - - [dd/mmm/yyyy:hh:mm:ss +0x00] "GET /page.html HTTP/1.1" 200 1234 "http://www.from.com/from.htm" "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)"</i><br>
You must use : <i>LogFormat="%virtualname %host %other %logname %time1 %methodurl %code %bytesd %refererquot %uaquot"</i><br>

<table bgcolor=#F0F0F0 width="100%" class=CFAQ><tr class=CFAQ><td class=CFAQ>
<u>If your log records are EXACTLY like this (<b>NCSA combined</b> with <b>Apache using mod_gzip</b> format 1):</u><br>
<i>62.161.78.73 - - [dd/mmm/yyyy:hh:mm:ss +0x00] "GET /page.html HTTP/1.1" 200 1234 "http://www.from.com/from.htm" "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)" mod_gzip: 66pct.</i><br>
You must use : <i>LogFormat="%host %other %logname %time1 %methodurl %code %bytesd %refererquot %uaquot %other %gzipratio"</i><br>
</td></tr></table>

<u>If your log records are EXACTLY like this (<b>NCSA combined</b> with <b>Apache using mod_gzip</b> format 2):</u><br>
<i>62.161.78.73 - - [dd/mmm/yyyy:hh:mm:ss +0x00] "GET /page.html HTTP/1.1" 200 1234 "http://www.from.com/from.htm" "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)" mod_gzip: DECHUNK:OK In:11393 Out:3904:66pct.</i><br>
You must use : <i>LogFormat="%host %other %logname %time1 %methodurl %code %bytesd %refererquot %uaquot %other %other %gzipin %gzipout"</i><br>

<table bgcolor=#F0F0F0 width="100%" class=CFAQ><tr class=CFAQ><td class=CFAQ>
<u>If your log records are EXACTLY like this (<b>NCSA common CLF</b> log format):</u><br>
<i>62.161.78.73 - - [dd/mmm/yyyy:hh:mm:ss +0x00] "GET /page.html HTTP/1.1" 200 1234</i><br>
You must use : <i>LogFormat=4</i><br>
Note: Browsers, OS's, Keywords and Referers features are not available with a such format.<br>
</td></tr></table>

<u>If your log records are EXACTLY like this (With some <b>Squid</b> versions, after setting <i>emulate_http_log</i> to on):</u><br>
<i>200.135.30.181 - - [dd/mmm/yyyy:hh:mm:ss +0x00] "GET http://www.mysite.com/page.html HTTP/1.0" 200 456 TCP_CLIENT_REFRESH_MISS:DIRECT</i><br>
You must use : <i>LogFormat="%host %other %logname %time1 %methodurl %code %bytesd %other"</i><br>

<table bgcolor=#F0F0F0 width="100%" class=CFAQ><tr class=CFAQ><td class=CFAQ>
<u>If your log records are EXACTLY like this (<b>IIS</b> W3C log format):</u><br>
<i>yyyy-mm-dd hh:mm:ss 62.161.78.73 - GET /page.html 200 1234 HTTP/1.1 Mozilla/4.0+(compatible;+MSIE+5.01;+Windows+NT+5.0) http://www.from.com/from.html</i><br>
You must use : <i>LogFormat=2</i><br>
</td></tr></table>

<u>If your log records are EXACTLY like this (<b>IIS</b> W3C log format with some <b>.net</b> servers):</u><br>
<i>yyyy-mm-dd hh:mm:ss GET /page.html - 62.161.78.73 - Mozilla/4.0+(compatible;+MSIE+5.01;+Windows+NT+5.0) http://www.from.com/from.html 200 1234 HTTP/1.1</i><br>
You must use : <i>LogFormat="%time2 %method %url %logname %host %other %ua %referer %code %bytesd %other"</i><br> 

<table bgcolor=#F0F0F0 width="100%" class=CFAQ><tr class=CFAQ><td class=CFAQ>
<u>If your log records are EXACTLY like this (With some <b>WebSite</b> versions):</u><br>
<i>yyyy-mm-dd hh:mm:ss 62.161.78.73 - 192.168.1.1 80 GET /page.html - 200 11205 0 0 HTTP/1.1 mydomain.com Mozilla/4.0+(compatible;+MSIE+5.5;+Windows+98) - http://www.from.com/from.html</i><br>
You must use : <i>LogFormat="%time2 %host %logname %other %other %method %url %other %code %bytesd %other %other %other %other %ua %other %referer"</i><br>
</td></tr></table>

<u>If your log records are EXACTLY like this (<b>Webstar</b> native log format):</u><br>
<i>05/21/00	00:17:31	OK  	200	212.242.30.6	Mozilla/4.0 (compatible; MSIE 5.0; Windows 98; DigExt)	http://www.cover.dk/	"www.cover.dk"	:Documentation:graphics:starninelogo.white.gif	1133</i><br>
You must use : <i>LogFormat=3</i><br>

<table bgcolor=#F0F0F0 width="100%" class=CFAQ><tr class=CFAQ><td class=CFAQ>
<u>If your log records are EXACTLY like this (<b>Lotus Notes/Domino</b> log format):</u><br>
<i>62.161.78.73 - Name Surname Service [dd/mmm/yyyy:hh:mm:ss +0x00] "GET /page.html HTTP/1.1" 200 1234 "http://www.from.com/from.htm" "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)"</i><br>
You must use : <i>LogFormat=6</i><br>
</td></tr></table>

<u>If you use a FTP server like <b>ProFTP</b>:</u><br>
See <a href="#FTP">FAQ-SET260</a>.<br>

<table bgcolor=#F0F0F0 width="100%" class=CFAQ><tr class=CFAQ><td class=CFAQ>
<u>If you want to analyze a mail log file (<b>Sendmail</b>, <b>Exchange</b>):</u><br>
See <a href="#MAIL">FAQ-SET270</a>.<br>
</td></tr></table>

<u>If you use <b>Windows Media Server</b>:</u><br>
See <a href="#FTP">FAQ-SET272</a>.<br>

<table bgcolor=#F0F0F0 width="100%" class=CFAQ><tr class=CFAQ><td class=CFAQ>
<u>If your log records are EXACTLY like this (With some providers):</u><br>
<i>62.161.78.73 - - [dd/Month/yyyy:hh:mm:ss +0x00] "GET /page.html HTTP/1.1" "-" 200 1234</i><br>
You must use : <i>LogFormat="%host %other %logname %time1 %methodurl %other %code %bytesd"</i><br>
Note: Browsers, OS's, Keywords and Referers features are not available with a such format.<br>
</td></tr></table>

<u>There is a lot of other possible log formats.</u><br>
You must use a personalized log format LogFormat ="..." as described in config file to
support other various log formats.<br>
<br>

<a name="FTP"></a><br>
<b><u>FAQ-SET260 : SETUP FOR FTP SERVER LOG FILES</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
What do I have to do to use AWStats to analyze some FTP server log files.<br>
<font class=CSolution>SOLUTION:</font><br>
AWStats was built to analyze web,wap or proxy server's log files. However it can be used with some FTP server log files.<br>
<u>Setup your ProFTP logformat:</u><br>
Modify the proftpd.conf file to add the following two lines :
<i>
<br>LogFormat awstats "%t %h %u %m %f %s %b"
<br>ExtendedLog /var/log/xferlog read,write awstats
</i>
<br>Then turn off old format Transfer log:
<i>
<br>TransferLog none
</i>
<br>
To have the change effective, stop your server, remove old log files and restart the server.<br>
<u>Setup AWStats to analyze those FTP log files:</u><br>
Copy config awstats.model.conf file to "awstats.proftp.conf".<br>
Modify this new config file:
<i>
<br>LogFile="/var/log/xferlog"
<br>LogFormat="%time1 %host %logname %method %url %code %bytesd"
<br>DNSLookup=0
<br>SkipFiles=""
<br>NotPageList=""
<br>ShowLinksOnUrl=0
<br>ShowHeader=1
<br>ShowMenu=1
<br>ShowMonthDayStats=UVHB
<br>ShowDaysOfWeekStats=HB
<br>ShowHoursStats=HB
<br>ShowDomainsStats=HB
<br>ShowHostsStats=HBL
<br>ShowAuthenticatedUsers=HBL
<br>ShowRobotsStats=1
<br>ShowEMailSenders=0
<br>ShowEMailReceivers=0
<br>ShowSessionsStats=1
<br>ShowPagesStats=PBEX
<br>ShowFileTypesStats=HB
<br>ShowFileSizesStats=0
<br>ShowBrowsersStats=0
<br>ShowOSStats=0
<br>ShowOriginStats=0
<br>ShowKeyphrasesStats=0
<br>ShowKeywordsStats=0
<br>ShowHTTPErrorsStats=0
</i>
<br><br>
Now you can use AWStats as usual (run the update process and read statistics).<br>
Warning: This tip doesn't work for FTPed files that contains spaces in them (they are not reported). You can still convert your
log file to replace 'space' char into '_'...<br>
<br>

<a name="MAIL"></a><br>
<b><u>FAQ-SET270 : SETUP FOR MAIL LOG FILES (SENDMAIL, POSTFIX, EXCHANGE...)</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
What do I have to do to use AWStats to analyze my mail log files.<br>
<font class=CSolution>SOLUTION:</font><br>
<br>
<u>For Sendmail or PostFix log files</u><br>
<br>
1- First, install a mail log convertor like <a href="http://www.klake.org/sma/">SMA</a> to use it
as a post-processor for AWStats update process.<br>
Setup SMA to convert your mail log into a format readable by AWStats:</u><br>
Copy sma (or sma.exe) file and sma.conf into same directory than awstats.pl file.<br>
Edit sma.conf to change the CLogFormat and ClogSentOnly parameter to :
<i>
<br>ClogFormat "%y-%m-%d %h:%n:%s %f %t %F %T SMTP - %S %z"
<br>ClogSentOnly no
</i>
<br>
<!--To have the change effective, stop your mail daemon, remove old log file and restart mail daemon.<br>
Send a mail and check in your mail that your log file looks like this:<br>-->
To check that your sma config is correct, run the following command:<br>
<b>sma -O clog -f /pathtosmaconf/sma.conf /pathtomaillog/maillog > convertedmaillog</b><br>
The resulting convertedmaillog file must have records that match the following format:<br>
<i>2001-01-01 05:38:08 sender@mailsender.com receiver@mailreceiver.com hostrelaysender hostrelayreceiver SMTP - 1 31357</i><br>
Warning: some sma versions (1.3) have been reported to not convert month correctly, giving
for example a date like this 2001-#01-01 instead of 2001-01-01. This makes AWStats analyze
fails so check your sma output and change version if error.<br>
<br>
2- Then setup AWStats to analyze SMA processed mail log:<br>
Copy config awstats.model.conf file to "awstats.mail.conf".<br>
Modify this new config file:
<i>
<br>LogFile="/pathtosma/sma -O clog -f /pathtosmaconf/sma.conf /pathtomaillog/maillog |"
<br>LogFormat="%time2 %email %email_r %host %host_r %method %url %code %bytesd"
<br>DNSLookup=0
<br>ValidSMTPCodes="1"
<br>ShowHeader=1
<br>ShowMenu=1
<br>ShowMonthDayStats=HB
<br>ShowDaysOfWeekStats=HB
<br>ShowHoursStats=HB
<br>ShowDomainsStats=0
<br>ShowHostsStats=HBL
<br>ShowAuthenticatedUsers=0
<br>ShowRobotsStats=0
<br>ShowEMailSenders=HBL
<br>ShowEMailReceivers=HBL
<br>ShowSessionsStats=0
<br>ShowPagesStats=0
<br>ShowFileTypesStats=0
<br>ShowFileSizesStats=0
<br>ShowBrowsersStats=0
<br>ShowOSStats=0
<br>ShowOriginStats=0
<br>ShowKeyphrasesStats=0
<br>ShowKeywordsStats=0
<br>ShowHTTPErrorsStats=0
</i>
<br><br>
Now you can use AWStats as usual (run the update process and read statistics).<br>
<br>
<u>For Exchange log files</u><br>
If someone can understand the Exchange log format, he can explain it to me at eldy@users.sourceforge.net.<br>
Until this server won't log in a clever way, just forget using AWStats or use a more serious
mail server (sendmail, postfix, ...). Sorry.<br>
<!--
Your Exchange mail log file might looks like this:<br>
<i>2002-9-29	0:3:2 GMT	-	-	-	S_EXCHANG01	-	/O=INVESTMENT SCORECARD INC/OU=MAIL/CN=RECIPIENTS/CN=KJOHNSON	1027	1640EF7202084243942C5EC620117D376B68AA@s_exchang01.investmentscorecard.com	0	0	1943	2	2002-9-29 0:3:2 GMT	0	-	c=US;a= ;p=Investment Score;l=S_EXCHANG01-020929000302Z-2583	Dev Request Late Notification: KS_CM00004271	EX:/O=INVESTMENT SCORECARD INC/OU=MAIL/CN=RECIPIENTS/CN=CLEARQUEST(KS_CM)	-</i><br>
Copy config awstats.model.conf file to "awstats.mail.conf".<br>
Modify this new config file:
<i>
<br>LogFile="yourmaillogfilename"
<br>LogFormat="%time2 %other %host %other %other %other %email %method %other %url %code %bytesd %other %other %other %other %other %other %email_r"
<br>LogSeparator="\t"
<br>DNSLookup=0
-->
<br>

<a name="MEDIASERVER"></a><br>
<b><u>FAQ-SET272 : SETUP FOR WINDOWS MEDIA SERVER</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
What do I have to do to use AWStats to analyze my Windows Media Server log files.<br>
<font class=CSolution>SOLUTION:</font><br>
<br>
<u>Setup your Windows Media Server log format to write the following fields:</u>
<i>
<br>c-ip
<br>date
<br>time
<br>cs-uri-stem
<br>c-starttime
<br>x-duration
<br>c-rate
<br>c-status
<br>c-playerid
<br>c-playerversion
<br>c-playerlanguage
<br>cs(User-Agent)
<br>cs(Referer)
<br>c-hostexe
<br>c-hostexever
<br>c-os
<br>c-osversion
<br>c-cpu
<br>filelength
<br>filesize
<br>avgbandwidth
<br>protocol
<br>transport
<br>audiocodec
<br>videocodec
<br>channelURL
<br>sc-bytes
</i>
<br>
To have the change effective, stop your server, remove old log files and restart the server.<br>
Listen to streaming files and check that your new log file looks like this:<br>
<i>
80.223.91.37 2002-10-08 14:18:58 mmst://mydomain.com/mystream 0 106 1 200 {F4A826EE-FA46-480F-A49B-76786320FC6B} 8.0.0.4477 fi-FI - - wmplayer.exe 8.0.0.4477 Windows_2000 5.1.0.2600 Pentium 0 0 20702 mms TCP Windows_Media_Audio_9 - - 277721
</i>
<br><br>
<u>Then setup AWStats to analyze your Media Server log:</u><br>
Copy config awstats.model.conf file to "awstats.mediaserver.conf".<br>
Modify this new config file:
<i>
<br>LogFile="/pathtomediaserver/mediaserverlog"
<br>LogFormat="c-ip date time cs-uri-stem c-starttime x-duration c-rate c-status c-playerid c-playerversion c-playerlanguage cs(User-Agent) cs(Referer) c-hostexe c-hostexever c-os c-osversion c-cpu filelength filesize avgbandwidth protocol transport audiocodec videocodec channelURL sc-bytes"
<br>DNSLookup=0
<br>ShowHeader=1
<br>ShowMenu=1
<br>ShowMonthDayStats=UHB
<br>ShowDaysOfWeekStats=HB
<br>ShowHoursStats=HB
<br>ShowDomainsStats=HB
<br>ShowHostsStats=HBL
<br>ShowAuthenticatedUsers=0
<br>ShowRobotsStats=0
<br>ShowEMailSenders=0
<br>ShowEMailReceivers=0
<br>ShowSessionsStats=0
<br>ShowPagesStats=PB
<br>ShowFileTypesStats=HB
<br>ShowFileSizesStats=0
<br>ShowBrowsersStats=1
<br>ShowOSStats=1
<br>ShowOriginStats=PH
<br>ShowKeyphrasesStats=0
<br>ShowKeywordsStats=0
<br>ShowHTTPErrorsStats=1
</i>
<br><br>
Now you can use AWStats as usual (run the update process and read statistics).<br>
<br>

<a name="NOTSAMENUMBER"></a><br>
<b><u>FAQ-SET280 : ERROR "NOT SAME NUMBER OF RECORDS OF..."</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
When I run AWStats from command line (or as a cgi from a browser), I get
a message "Not same number of records of ...".<br>
<font class=CSolution>SOLUTION:</font><br>
This means your AWStats reference database files (operating systems, browsers, robots...) are not correct.
First try to update to last version. Then check in your disk that you have only ONE of those files. They should be
in '<b>lib</b>' directory ('db' with 4.0) where awstats.pl is installed:<br>
<i>browsers.pm</i><br>
<i>operating_systems.pm</i><br>
<i>robots.pm</i><br>
<i>domains.pm</i><br>
<i>search_engines.pm</i><br>
<i>worms.pm</i><br>
<br>

<a name="COULDNOTOPEN"></a><br>
<b><u>FAQ-SET300 : ERROR "COULDN'T OPEN FILE ..."</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
I have the following error:<br>
<i>"Couldn't open file /workingpath/awstatsmmyyyy.tmp.9999: Permission denied."</i><br>
<font class=CSolution>SOLUTION:</font><br>
This error means that the web server didn't succeed in writing the working temporary file (file ended by .tmp.9999 
where 9999 is a number) because of permissions problems.<br>
First check that the directory <i>/workingpath</i> has "Write" permission for<br>
user <u>nobody</u> (default user used by Apache on Linux systems)<br>
or user <u>IUSR_<i>SERVERNAME</i></u> (default used user by IIS on NT).<br>
With Unix, try with a path with no links.<br>
With NT, you must check NTFS permissions ("Read/Write/Modify"), if your directory is on a NTFS partition.<br>
With IIS, there is also a "Write" permission attribute, defined in directory properties 
in your IIS setup, that you must check.<br>
With IIS, if a default cgi-bin directory was created during IIS install, try to 
put AWStats directly into this directory.<br>
If this still fails, you can change the DirData parameter to say AWStats 
that you want to use another directory (A directory you are sure that the default 
user, used by web server process, can write into).<br>
<br>

<a name="EMPTY_STATS"></a><br>
<b><u>FAQ-SET350 : EMPTY OR NULL STATISTICS REPORTED</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
AWStats seems to work but I'm not getting any results. i get a statistics page that looks like i have no hits.<br>
<font class=CSolution>SOLUTION:</font><br>
That's one of the most common problem you can get and there is 2 possible reasons :<br>
<br>
1) Your log file format setup might be wrong.<br>
<u>If you use Apache web server</u><br>
The best way of working is to use the <i>"combined"</i> log format (See the <a href="awstats_setup.html">Setup and Use</a> page
to know the way to change your Apache server log from <i>"common"</i> log format into <i>"combined"</i>).
Don't forget to stop Apache, reset your log file and restart Apache to make change into combined
effective. Then you must setup your AWStats config file with value <a href="awstats_config.html#LogFormat">LogFormat</a>=1.<br>
If you want to use another format, read the next FAQ to have examples of LogFile value according
to log files format.<br>
<u>If you use IIS server or Windows built-in web server</u><br>
The Internet Information Server default W3C Extended Log Format will not work correctly with AWStats.
To make it work correctly, start the IIS Snap-in, select the web site and look at it's Properties.
Choose W3C Extended Log Format, then Properties, then the Tab Extended Properties and uncheck everything
under Extended Properties. Once they are all unchecked, check off the list given in
the <a href="awstats_setup.html">Setup and Use</a> page ("With IIS Server" chapter).<br>
You can also read the next FAQ to have examples of <a href="awstats_config.html#LogFormat">LogFormat</a> value according to log files format.<br>
<br>
2) You are viewing stats for a year or month when no hits was made on your server.<br>
When you run awstats, the reports is by default for the current month/year.<br>
If you want to see data for another month/year you must:<br>
Add -year=YYYY -month=MM on command line when building the html report page from command line.<br>
Use an URL like http://myserver/cgi-bin/awstats.pl?config=xxx&year=YYYY&month=MM if viewing stats with AWStats used as a CGI.<br>
<br>

<a name="REDIRECT"></a><br>
<b><u>FAQ-SET400 : PIPE REDIRECTION TO A FILE GIVE ME AN EMPTY FILE</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
I want to redirect awstats.pl output to a file with the following command :<br>
<i>> awstats.pl -config=... [other_options] > myfile.html</i><br>
But myfile.html is empty (size is 0). If i remove the redirection, everythings works correctly.<br>
<font class=CSolution>SOLUTION:</font><br>
This is not an AWStats bug but a problem between perl and Windows.<br>
You can easily solve this running the following command instead:<br>
<i>> perl awstats.pl -config=... [other_options] > myfile.html</i><br>
<br>

<a name="NO_ICON"></a><br>
<b><u>FAQ-SET450 : NO PICTURES/GRAPHICS SHOWN</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
AWStats seems to work (all data and counters seem to be good) but I have no image shown.<br>
<font class=CSolution>SOLUTION:</font><br>
With Apache web server, you might have troubles (no picture shown on stats page) if you use a directory called "icons" (because of Apache
pre-defined "icons" alias directory), so use instead, for example, a directory called "icon"  with
no s at the end (Rename your directory physically and change the <a href="awstats_config.html#DirIcons">DirIcons</a> parameter in config file
to reflect this change).<br>
<br>

<a name="ROTATE"></a><br>
<b><u>FAQ-SET500 : HOW TO ROTATE MY LOGS WITHOUT LOOSING DATA</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
I want to archive/rotate my logs using my web server system options or a third software (rotatelog,
cronolog) but don't want to loose any visits information during the rotate process.<br>
<font class=CSolution>SOLUTION:</font><br>
If you use a rotate system (internal web server feature or third software), this means you probably not use
AWStats <a href="awstats_config.html#PurgeLogFile">PurgeLogFile</a> nor <a href="awstats_config.html#ArchiveLogRecords">ArchiveLogRecords</a> parameter.<br>
* If your config file is setup to process current log file (because you want to use the <a href="awstats_config.html#AllowToUpdateStatsFromBrowser">AllowToUpdateStatsFromBrowser</a>
option), if you don't want to loose any records during the rotate process, you can just run the AWStats update process 
on the archived log file just after the update process using the -logfile option (This will avoid you to change the config file).<br>
* If you choose (for security reason, to avoid CPU abuse on large web site or other) to make updates by your scheduler only on archive files, this means
you don't use the <a href="awstats_config.html#AllowToUpdateStatsFromBrowser">AllowToUpdateStatsFromBrowser</a> "real-time" feature of AWStats.
In this case all you have to do is to run the update process just after the rotate was done using a config/domain file configured to
process the archived log files (using date tags of <a href="awstats_config.html#LogFile">LogFile</a> for examples).<br>
Note: For Apache users, use of <a href="http://cronolog.org" target=awstatsbis>cronolog</a> seems to be a better choice
than rotatelog (cronolog is available for Unix/Linux and Windows and is more flexible).<br>
To use cronolog or rotatelog you must setup your web server log file name using a pipe like this example:<br>
<i>CustomLog "|/usr/sbin/cronolog [cronolog_options] /var/logs/access.%Y%m%d.log" combined</i><br>
<br>



<a name="CRONTAB"></a><br>
<b><u>FAQ-SET550 : HOW TO RUN AWSTATS FREQUENTLY</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
AWStats must be ran frequently to update statistics. How can I do this ?<br>
<font class=CSolution>SOLUTION:</font><br>
<br>
<u>With Windows</u>, you can use the internal task scheduler.
The use of this tool is not an AWStats related problem, so please take a look at your Windows manual.
Warning, if you use <i>"awstats.pl -config=mysite -update"</i> in your scheduled task, you might
experience problem of failing task. Try this instead<br>
<i>"C:\WINNT\system32\CMD.EXE /C C:\[awstats_path]\awstats.pl -config=mysite -update"</i><br>
or<br>
<i>"C:\[perl_path]\perl.exe C:\[awstats_path]\awstats.pl -config=mysite -update"</i><br>
A lot of other scheduler (sharewares/freewares) are very good.<br>
<br>
<u>With unix-like operating systems</u>, you can use the "<b>crontab</b>".<br>
This is examples of lines you can add in the cron file (see your unix reference manual for cron) :<br>
To run update every day at 04:00, use :<br>
<i>0 4 * * * /opt/awstats/wwwroot/cgi-bin/awstats.pl -config=mysite -update</i><br>
To run update every hour, use :<br>
<i>0 * * * * /opt/awstats/wwwroot/cgi-bin/awstats.pl -config=mysite -update</i><br>
<br>

<a name="EXCLUDEHOSTS"></a><br>
<b><u>FAQ-SET600 : HOW CAN I EXCLUDE MY IP ADDRESS (OR WHOLE SUBNET MASK) FROM STATS ?</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
I don't want to see my own IP address in the stats or I want to exclude counting visits from a whole subnet.<br>
<font class=CSolution>SOLUTION:</font><br>
You must edit the config file to change the <a href="awstats_config.html#SkipHosts">SkipHosts</a> parameter.<br>
For example, to exclude:<br>
- your own IP address 123.123.123.123, use <a href="awstats_config.html#SkipHosts">SkipHosts</a>="123.123.123.123"<br>
- the whole subnet 123.123.123.xxx, use <a href="awstats_config.html#SkipHosts">SkipHosts</a>="123.123.123"<br>
- all sub hosts xxx.myintranet.com, use <a href="awstats_config.html#SkipHosts">SkipHosts</a>=".myintranet.com" (This one works only if DNS lookup is already done in your
log file).<br>
<br> 

<a name="MIGRATEDOUBLED"></a><br>
<b><u>FAQ-SET700 : MY VISITS ARE DOUBLED FOR OLD MONTH I MIGRATED FROM 3.2 TO 5.X</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
After having migrated an old history file for a month, the number of visits for this month is doubled.
So the number of "visits per visitor" is also doubled and "pages per visit" and "hits per visit" is divided by 2.
All other data like "pages", "hits" and bandwith are correct.<br>
<font class=CSolution>SOLUTION:</font><br>
This problem occurs when migrating history files from 3.2 to 5.x.<br>
To fix this you can use the following tip (warning, do this only after migrating from
3.2 to 5.x and if your visit value is doubled). The goal is to remove the line
in history file that looks like this<br>
<i>YYYYMM00 999 999 999 999</i><br>
where YYYY and MM are year and month of config file and 999 are numerical values.<br>
<br>
<u>So if your OS is Unix/Linux</u><br>
<i>
grep -vE '^[0-9]{6}00' oldhistoryfile > newhistoryfile<br>
mv newhistoryfile oldhistoryfile<br>
</i>
And then run the migrate process again on the file.<br>
<br>
<u>If your OS is windows and got cygwin</u><br>
You must follow same instructions than if OS is Unix/Linux BUT
you must do this from a cygwin 'sh' shell and not from the DOS
prompt (because the ^ is not understanded by DOS).<br>
And then run the migrate process again on the file.<br>
<br>
<u>In any other case (in fact works for every OS)</u><br>
You must remove manually the line <i>YYYYMM00 999 999 999 999</i> (must find one and only
one such line) and then run the migrate process again on the file.<br>
<br>

<hr><br>


<a name="SPEED"></a><br>
<b><u>FAQ-COM100 : AWSTATS SPEED/TIMEOUT PROBLEMS ?</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
When I analyze large log files, processing times are very important (Example: update process from a browser
returns a timeout/internal error after a long wait).
Is there a setup or things to do to avoid this and increase speed ?<br>
<font class=CSolution>SOLUTION:</font><br>
You really need to understand how a log analyzer works to have good speed.
There is also major setup changes you can do to decrease your processing time.<br>
See <a href="awstats_benchmark.html#ADVICES">important advices</a> in benchmark page.<br>
<br>

<a name="BENCHMARK"></a><br>
<b><u>FAQ-COM150 : BENCHMARK / FREQUENCY TO LAUNCH AWSTATS TO UPDATE STATISTICS</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
What is AWStats speed ?<br>
What is the frequency to launch AWStats process to update my statistics ?<br>
<font class=CSolution>SOLUTION:</font><br>
All benchmarks information and advice on frequency for update process are related into
the <a href="awstats_benchmark.html">Benchmark page</a>.<br>
<br>

<a name="DNS"></a><br>
<b><u>FAQ-COM200 : HOW REVERSE DNS LOOKUP WORKS, UNRESOLVED IP ADDRESSES</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
The reported page AWStats shows me has no hostnames, only IP addresses, countries reported are all "unknown".<br>
<font class=CSolution>SOLUTION:</font><br>
When AWStats find an IP address in your log file, it tries a reverse DNS lookup to find
the hostname and domain if the <a href="awstats_tools.html#DNSLookup">DNSLookup</a> parameter, in your AWStats config file, is <a href="awstats_config.html#DNSLookup">DNSLookup</a>=1
(Default value). So, first, check if you have the good value. The <a href="awstats_config.html#DNSLookup">DNSLookup</a>=0 
must be used only if your log file contains already resolved IP address. For example, 
when you set up Apache with the <i>HostNameLookups=on</i> directive. When you 
ask your web server to make itself the reverse DNS lookup to log hostname instead 
of IP address, you will still find some IP addresses in your log file because 
the reverse DNS lookup is not always possible. But if your web server fails in 
it, AWStats will also fails (All reverse DNS lookups use the same system API). 
So to avoid AWStats to make an already done lookup (with success or not), you 
can set <a href="awstats_config.html#DNSLookup">DNSLookup</a>=0 in AWStats config file.
If you prefer, you can make the reverse DNS lookup on a log file before running
your log analyzer (If you only need to convert a logfile with IP Addresses into a
logfile with resolved hostnames). You can use for this <a href="awstats_config.html#logresolvemerge">logresolvemerge</a> tool
provided with AWStats distribution (This tools is an improved version of <i>logresolve</i> provided with Apache).<br>
<br>

<a name="DIFFERENT_RESULTS"></a><br>
<b><u>FAQ-COM250 : DIFFERENT RESULTS THAN OTHER ANALYZER</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
I also use webalizer (or another log analyzer) and it doesn't report the same results than AWStats. Why ?<br>
<font class=CSolution>SOLUTION:</font><br>
If you compare AWStats results with an other log file analyzer, you will found some differences,
sometimes very important. In fact, all analyzer (even AWStats) make "over reporting" because of the
problem of proxy-servers and robots. However AWStats is one the most accurate and its "over reporting"
is very low where all other analyzers, even the most famous, have a very high error rate (10% to 2x more than reality).<br>
This is the most important reasons why you will find differences:<br>
- Some dynamic pages generated by CGI programs are not counted by some analyzer (ie Webalizer) like
a "Page" (but only like a "Hit") if CGI prog has not a .cgi extension, so they are not included
correctly in their statistics. AWStats does not make this error and all CGI pages are pages.<br>
- AWStats is the alone analyzer (that i know for the moment) able to detect robots visits.
All other analyzers think it's a human visitor. This error make them to report more visits and visitors
than reality. This does not happen with AWStats. When it tells "1 visitor", it means "1 human visitor".
All robots hits are reported in the "Robots/Spiders visitors" chart.<br>
- A lot of analyzer (ie webalizer) use the "Hits" to count visitors. This is not a good way of working :
Some visitors use a lot of proxy servers to surf (ie: AOL users), this means it's possible that several
hosts (with several IP addresses) are used to reach your site for only one visitor (ie: one proxy server download
the page and 2 other servers download all images). Because of this, if stats of unique visitors are made on "hits",
3 users are reported but it's wrong. So AWStats, like HitBox, considers only HTML "Pages" to count unique visitors.
This decrease the error, not completely, because it's always possible that a proxy server download one HTML frame and
another one download another frame, but this make the over-reporting of unique visitors less important.<br>
There is also differences in log analyzers databases and algorithms that make details of results less or more accurate:<br>
- AWStats has a larger browser, os and search engine database, so reports concerning this are more accurate.<br>
- AWStats has url syntax rules to find keywords or keyphrases used to find your site, but AWStats has also
an algorithm to detect keywords of unknown search engines with unknown url syntax rule.<br>
<br>

<a name="DIFFERENCE_HOURS"></a><br>
<b><u>FAQ-COM300 : DIFFERENCE BETWEEN LOCAL HOURS AND AWSTATS REPORTED HOURS</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
I use IIS and there's a difference between local hour and AWStats reported hour. For example I made a hit on a page 
at 4:00 and AWStats report I hit it at 2:00.<br>
<font class=CSolution>SOLUTION:</font><br>
This is not a problem of time in your local client host.
AWStats use only time reported in logs by your server 
and all time are related to server hour. The problem is that IIS in some foreign 
versions puts GMT time in its log file (and not local time). So, you have also 
GMT time in your statistics.<br>
You can wait that Microsoft change this in next IIS versions.
However, Microsoft sheet Q271196 "IIS Log File Entries Have the Incorrect Date and Time Stamp" says: <br>
<i>The selected log file format is the W3C Extended Log File 
Format. The extended log file format is defined in the W3C 
Working Draft WD-logfile-960323 specification by Phillip 
M. Hallam-Baker and Brian Behlendorf. This document defines 
the Date and Time files to always be in GMT. This behavior 
is by design.</i><br>
So this means this way of working might never be changed, so another chance is to use the AWStats plugin 'timezone'.
Warning, this plugin need the perl module Time::Local and it reduces seriously AWStats speed.<br>
To enable the plugin, uncomment the following line in your config file.<br>
<i>LoadPlugin="timezone TZ"</i><br>
where TZ is value of your signed timezone (+2 for Paris, -8 for ...)<br>
<br>

<a name="OLDLOG"></a><br>
<b><u>FAQ-COM350 : HOW CAN I PROCESS OLD LOG FILE ?</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
I want to process an old log file to include its data in my AWStats reports.<br>
<font class=CSolution>SOLUTION:</font><br>
You must change your <a href="awstats_config.html#LogFile">LogFile</a> parameter to point to the old log file and run
the update (or use the -logfile option on command line to overwrite <a href="awstats_config.html#LogFile">LogFile</a> parameter).
The update process can only accept files in chronological order, so if you have already processed a recent file,
you must before reset all your statistics (see next FAQ) and restart all the update process for all past log files
and in chronological order.<br>
<br>

<a name="MULTILOG"></a><br>
<b><u>FAQ-COM400 : HOW CAN I UPDATE MY STATISTICS WHEN I USE A LOAD BALANCING SYSTEM THAT SPLITS MY LOGS ?</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
How can I update my statistics when i use a load balancing system that split my logs ?<br>
<font class=CSolution>SOLUTION:</font><br>
The best solution is to merge all split log files resulted from all your load balanced servers into one. For this, you can use
the <a href="awstats_config.html#logresolvemerge">logresolvemerge</a> tool provided with AWStats :<br>
<i>logresolvemerge.pl file1.log file2.log ... filen.log > newfiletoprocess.log</i><br>
And setup the <a href="awstats_config.html#LogFile">LogFile</a> parameter in your config file to process the <i>newfiletoprocess.log</i> file or use
the <i>-logfile</i> command line option to overwrite <a href="awstats_config.html#LogFile">LogFile</a> value.<br>
<br>

<a name="RESET"></a><br>
<b><u>FAQ-COM500 : HOW CAN I RESET ALL MY STATISTICS ?</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
I want to reset all my statistics and restart my stats from now.<br>
<font class=CSolution>SOLUTION:</font><br>
All analyzed data are stored by AWStats in files called <i>awstatsMMYYYY.[site.]txt</i> (one file each month).
You will find those files in directory defined by <a href="awstats_config.html#DirData">DirData</a> parameter (same directory than awstats.pl by default).<br>
To reset your stats for a month, you just have to delete the file for the required month/year.<br>
To reset all your stats, delete all files awstats*.txt<br>
Warning, if you delete those data files, you won't be able to recover your stats back, unless you kept old log files somewhere.
You will have to process all past log files (in chronological order) to get old statistics back.<br>
<br>

<a name="EDITHISTORY"></a><br>
<b><u>FAQ-COM550 : CAN I SAFELY REMOVE A LINE IN HISTORY FILES (awstatsMMYYYY*.txt) ?</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
After processing a log file I want to change my statistics
without running AWStats update process but changing directly data in AWStats historical database files.<br>
<font class=CSolution>SOLUTION:</font><br>
If you remove a lines starting with "BEGIN_" or "END_", AWStats will find your file "corrupted" so you must not change those
two kinds of lines.<br>
You can change, add or remove any line that is in any sections but if you do this, you must
also update the MAP section (lines between BEGIN_MAP and END_MAP) because this section contains the offset in
file of each other sections for direct I/O access.
If history file is the last one, you can easily do that by removing completely the MAP section and run an update process.
Like that AWStats will rewrite the history file and the MAP section will be rewritten (MAP section is not read by
update process, only written). You do this at your own risk. The main risk is that some charts will report wrong values
or be unavailable.<br>
<br>

<hr><br>

<a name="CSSATTACK"></a><br>
<b><u>FAQ-SEC100 : CAN AWSTATS BE USED TO MAKE CROSS SITE SCRIPTING ATTACKS ?</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
If a bad user use a browser to make a hit on an URL that include a < SCRIPT > ... < /SCRIPT >
section in its parameter, when AWStats will show the links on the report page, does the script will be executed ?<br>
<font class=CSolution>SOLUTION:</font><br>
No. AWStats use a filter to remove all scripts codes that was included in an URL to make a Cross Site Scripting Attack using a
log analyzer report page.<br>
<br>

<a name="SECUSER"></a><br>
<b><u>FAQ-SEC150 : HOW CAN I PREVENT SOME USERS TO SEE STATISTICS OF OTHER USERS ?</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
I don't want a user xxx (having a site www.xxx.com) to see statistics of user yyy (having
a site www.yyy.com). How can i setup AWStats for this ?<br>
<font class=CSolution>SOLUTION:</font><br>
Take a look at the <a href="awstats_security.html">security page</a>.<br>
<br>

<a name="WORMS"></a><br>
<b><u>FAQ-SEC200 : HOW TO MANAGE LOG FILES (AND STATISTICS) CORRUPTED BY 'WORMS' ATTACKS ?</u></b><br>
<font class=CProblem>PROBLEM:</font><br>
My site is attacked by some worms viruses (like Nimba, Code Red...). This make my log file corrupted
and full of 404 errors. So my statistics are also full of 404 errors. This make AWStats slower and my history files very large.
Can I do something to avoid this ?<br>
<font class=CSolution>SOLUTION:</font><br>
Yes.<br>
'Worms' attacks are infected browsers, robots or server chnaged into web client that make hits on your site using a very long
unknown URL like this one:<br>
<i>/default.ida?XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX%40%50...%40%50</i><br>
URL is generated by the infected robot and the purpose is to exploit a vulnerability of the web server (In most cases, only IIS is vulnerable).
With such attacks, you will will always find a 'common string' in those URLs.
For example, with Code Red worm, there is always default.ida in the URL string. Some other worms send URLs with cmd.exe in it.
So, you should edit your config file to add in the <a href="awstats_config.html#SkipFiles">SkipFiles</a> parameter the following value:<br>
<i>SkipFiles="default.ida cmd.exe"</i><br>
<br>


<hr>
<script language="javascript">
	var lastmod = new Date(document.lastModified);
	if (lastmod.getDate() > 0) {
		if (lastmod.getDate()<10) zerod="0"
		else zerod="";
		if (lastmod.getMonth()<9) zerom="0"
		else zerom=""
		year2kok=lastmod.getYear();
		if (year2kok<100) year2kok+=2000;
		if ((year2kok>=100) && (year2kok < 1970)) year2kok+=1900;
		document.writeln("Last revision: "+year2kok+"-"+zerom+(lastmod.getMonth()+1)+"-"+zerod+lastmod.getDate());
	}
</script>

</body>
</html>
