<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta name="description" content="AWStats Documentation - Using the Extra Sections features">
<meta name="keywords" content="awstats, awstat, extra, section, sections, feature, features, report, extrasection">
<meta name="robots" content="index,follow">
<meta name="title" content="AWStats Documentation - Using the Extra Sections features">
<title>AWStats Documentation - Using the Extra Sections features</title>
<link rel="stylesheet" href="styles.css" type="text/css">
<!-- $Revision$ - $Author$ - $Date$ -->
</head>

<body topmargin=10 leftmargin=5>


<table style="font: 10pt arial,helvetica,verdana" cellpadding=0 cellspacing=0 border=0 bgcolor=#FFFFFF width=100%>

<!-- Large -->
<tr style="font: 10pt arial,helvetica,verdana">
<td bgcolor=#9999cc align=center><a href="/"><img src="images/awstats_logo4.png" border=0></a></td>
<td bgcolor=#9999cc align=center>
<br>
<font style="font: 16pt arial,helvetica,sanserif" color=#EEEEFF><b>AWStats logfile analyzer 6.1 Documentation</b></font><br>
<br>
</td>
<td bgcolor=#9999cc align=center>
&nbsp;
</td>
</tr>

</table>


<br><br><H1 style="font: 26px arial,helvetica,sanserif">Using the Extra Sections features</H1>

<br>
The AWStats Extra Sections features are powerfull setup options to allow you to add your own
report not provided by default with AWStats. You can use it to build special reports, like
number of sales for a particular product, marketing reports, counting for a particular
user or agent, etc...<br>
<br>

<br>
<u><b>The following explanation is same than the one found in AWStats config file:</b></u><br>
<br>#-----------------------------------------------------------------------------
<br># EXTRA SECTIONS
<br>#-----------------------------------------------------------------------------
<br># You can define your own charts, you choose here what are rows and columns
<br># keys. This feature is particularly usefull for marketing purpose, tracking
<br># products orders for example.
<br># For this, edit all parameters of Extra section. Each set of parameter is a
<br># different chart. For several charts, duplicate section changing the number.
<br># Note: Each Extra section reduces AWStats speed by 8%.
<br>#
<br># WARNING: A wrong setup of Extra section might result in too large arrays
<br># that will consume all your memory, making AWStats unusable after several
<br># updates, so be sure to setup it correctly.
<br># In most cases, you don't need this feature.
<br>#
<br># ExtraSectionNameX is title of your personalized chart.
<br># ExtraSectionCodeFilterX is list of codes the record code field must match.
<br>#   Put an empty string for no test on code.
<br># ExtraSectionConditionX are conditions you can use to count or not the hit,
<br>#   Use one of the field condition (URL,QUERY_STRING,REFERER,UA,HOST)
<br>#   and a regex to match, after a coma. Use "|" for "OR".
<br># ExtraSectionFirstColumnTitleX is the first column title of the chart.
<br># ExtraSectionFirstColumnValuesX is a Regex string to tell AWStats in which 
<br>#   field to extract value from (URL,QUERY_STRING,REFERER,UA,HOST)
<br>#   and how to extract the value (using regex syntax). Each different value
<br>#   found will appear in first column of report on a different row. Be sure
<br>#   that list of different possible values will not grow indefinitely.
<br># ExtraSectionFirstColumnFormatX is the string used to write value.
<br># ExtraSectionStatTypesX are things you want to count. You can use standard
<br>#   code letters (P for pages,H for hits,B for bandwidth,L for last access).
<br># ExtraSectionAddAverageRowX add a row at bottom of chart with average values.
<br># ExtraSectionAddSumRowX add a row at bottom of chart with sum values.
<br># MaxNbOfExtraX is maximum number of rows shown in chart.
<br># MinHitExtraX is minimum number of hits required to be shown in chart.

<br><br>
Warning: the ExtraSectionConditionX MUST use regex values since AWStats 6.0.<br>
ExtraSectionFirstColumnValuesX also need REGEX value for all AWStats versions.<br>
See examples for syntax use.<br>
<br>

<br><br>
<u><b>You will find here examples of ExtraSection setup you can follow to build your own reports.
Try to follow them to build your own reporting tools:</b></u><br>
<br>
<li><a href="#productorders">Tracking Product orders</a><br>
<li><a href="#bugzilla">Tracking Bugzilla most frequently viewed bugs</a><br>
<li><a href="#awredir">Tracking Exit clicks</a><br>
<li><a href="#level2dir">List of top level 2 path under a directory /mydir</a><br>


<br>

<br>
<br><a name="productorders"><H2 style="font: 22px arial,helvetica,sanserif color: #606060"><u>Tracking Product orders</u></H2></a>
Image your web site is an e-store that sells 80 different products. Each of them has an id.
Imagine each time, someone make an order for product 49, the order.cgi script or order2.cgi script
is called with, in URL query parameter, the id of the product, meanings that you get in your log
file a hit that looks like this:<br>
<i>GET /cgi-bin/order.cgi?productid=49&session=A0B1C2</i>
<br>
So this is how you need to setup your ExtraSection to track your product orders:<br>
<i>
<br>ExtraSectionName1="Product orders"
<br>ExtraSectionCodeFilter1="200 304"
<br>ExtraSectionCondition1="URL,\/cgi\-bin\/order\.cgi|URL,\/cgi\-bin\/order2\.cgi"
<br>ExtraSectionFirstColumnTitle1="Product ID"
<br>ExtraSectionFirstColumnValues1="QUERY_STRING,productid=([^&]+)"
<br>ExtraSectionFirstColumnFormat1="%s"
<br>ExtraSectionStatTypes1=PL
<br>ExtraSectionAddAverageRow1=0
<br>ExtraSectionAddSumRow1=1
<br>MaxNbOfExtra1=100
<br>MinHitExtra1=1
</i>
<br>


<br>
<br><a name="bugzilla"><H2 style="font: 22px arial,helvetica,sanserif color: #606060"><u>Tracking Bugzilla most frequently viewed bugs</u></H2></a>
This is an example on how to setup your ExtraSection:<br>
<i>
<br>ExtraSectionName1="Bugzilla: Most frequently viewed bugs"
<br>ExtraSectionCodeFilter1="200 304"
<br>ExtraSectionCondition1="URL,\/bugzilla\/show_bug\.cgi"
<br>ExtraSectionFirstColumnTitle1="Bug ID"
<br>ExtraSectionFirstColumnValues1="QUERY_STRING,id=([^&]+)"
<br>ExtraSectionFirstColumnFormat1="&lt;a href='/bugzilla/show_bug.cgi?id=%s' target=new&gt;%s&lt;/a&gt;"
<br>ExtraSectionStatTypes1=PL
<br>ExtraSectionAddAverageRow1=0
<br>ExtraSectionAddSumRow1=1
<br>MaxNbOfExtra1=500
<br>MinHitExtra1=1
</i>
<br>


<br>
<br><a name="awredir"><H2 style="font: 22px arial,helvetica,sanserif color: #606060"><u>Tracking Exit clicks</u></H2></a>
AWStats shows you naturally the exit pages. However, you don't know where you visitor go
after exiting your site since clicking on a link that point to an external link will log
the viewed page on the external server and not on yours.
If you want to track this, you can, using the ExtraSection and the <b>awredir.pl</b> tool
(provided with AWStats).<br>
This tools must be used as a CGI wrapper. When called on 'A HREF' link, it returns to
browser a redirector to tell it to show the required page.
So, to use this script, you must replace HTML href tags that points to external web sites
onto your HTML pages from<br>
<i>&lt;a href="http://externalsite/pagelinked"&gt;Link&lt;/a&gt;<br></i>
to<br>
<i>&lt;a href="http://yoursite/cgi-bin/awredir.pl?url=http://externalsite/pagelinked">Link&lt;/a&gt;<br></i>
<br>
For your web visitor, there is no difference. However this allow you to track
clicks done on links onto your web pages that point to external web sites,
because an entry will be seen in your own server log like this record:<br>
<i>
80.1.2.3 - - [01/Jan/2001:16:00:00 -0300] "GET /cgi-bin/awredir.pl?url=http://externalsite/pagelinked HTTP/1.1" 302 70476 "http://yoursite/pagewithlink.html" "FireBird/0.7"<br>
</i>
<br>
Then, you can add in AWStats a chart to track all call to <i>awredir.pl</i> with
keys values taken from the "url=" parameter. You will get in an independant chart, counting
all external pages viewed by your visitor after exiting your site.<br>
This is for this how you must setup your ExtraSection:<br>
<i>
<br>ExtraSectionName1="Redirected Hit"
<br>ExtraSectionCodeFilter1="302"
<br>ExtraSectionCondition1="URL,\/cgi\-bin\/awredir\.pl"
<br>ExtraSectionFirstColumnTitle1="Url"
<br>ExtraSectionFirstColumnValues1="QUERY_STRING,url=([^&]+)"
<br>ExtraSectionStatTypes1=HL
<br>MaxNbOfExtra1=500
<br>MinHitExtra1=1
<br>ExtraSectionAddSumRow1=1
</i>
<br><br>


<br><a name="level2dir"><H2 style="font: 22px arial,helvetica,sanserif color: #606060"><u>List of top level 2 path under a directory /mydir</u></H2></a>
So this is how you need to setup your ExtraSection to add a chart for a such tracking:<br>
<i>
<br>ExtraSectionName1="List of top level 2 path under /mydir"
<br>ExtraSectionCodeFilter1="200 304"
<br>ExtraSectionCondition1="URL,^\/mydir\/.*"
<br>ExtraSectionFirstColumnTitle1="Directory name"
<br>ExtraSectionFirstColumnValues1="URL,^\/mydir\/([\w]+)\/"
<br>ExtraSectionStatTypes1=PHK
<br>MaxNbOfExtra1=50
<br>MinHitExtra1=1
</i>
<br><br>


<br><br>
There is a lot of other possible use for Extra Sections ...<br>
<br>


<br>
<hr>

<script language=javascript>
	var date='$Date$';
	document.writeln("Last revision: "+date);
</script>

</body>
</html>
